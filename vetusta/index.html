<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vetusta: Secretos y Reputaciones</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <style>
        * { box-sizing: border-box; }
        body { 
            margin: 0; 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            line-height: 1.6;
        }
        .min-h-screen { min-height: 100vh; }
        .bg-gradient { background: linear-gradient(135deg, #fef7cd 0%, #fed7aa 100%); }
        .container { max-width: 1280px; margin: 0 auto; padding: 1rem; }
        .container-sm { max-width: 640px; margin: 0 auto; padding: 1rem; }
        .container-lg { max-width: 1024px; margin: 0 auto; padding: 1rem; }
        .grid { display: grid; gap: 1rem; }
        .grid-cols-1 { grid-template-columns: repeat(1, 1fr); }
        .grid-cols-2 { grid-template-columns: repeat(2, 1fr); }
        .grid-cols-4 { grid-template-columns: repeat(4, 1fr); }
        @media (min-width: 1024px) {
            .lg\\:grid-cols-4 { grid-template-columns: repeat(4, 1fr); }
            .lg\\:col-span-2 { grid-column: span 2 / span 2; }
        }
        @media (min-width: 768px) {
            .md\\:grid-cols-4 { grid-template-columns: repeat(4, 1fr); }
        }
        .card { background: white; border-radius: 0.5rem; box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1); padding: 1.5rem; }
        .btn { padding: 0.75rem 1rem; border: none; border-radius: 0.375rem; font-weight: 600; cursor: pointer; transition: all 0.2s; }
        .btn-primary { background: #d97706; color: white; }
        .btn-primary:hover { background: #b45309; }
        .btn-secondary { background: #3b82f6; color: white; }
        .btn-secondary:hover { background: #1d4ed8; }
        .btn-success { background: #10b981; color: white; }
        .btn-success:hover { background: #059669; }
        .btn-purple { background: #8b5cf6; color: white; }
        .btn-purple:hover { background: #7c3aed; }
        .btn-red { background: #ef4444; color: white; }
        .btn-red:hover { background: #dc2626; }
        .btn-full { width: 100%; }
        .text-center { text-align: center; }
        .text-left { text-align: left; }
        .text-right { text-align: right; }
        .font-bold { font-weight: 700; }
        .font-semibold { font-weight: 600; }
        .font-medium { font-weight: 500; }
        .text-4xl { font-size: 2.25rem; line-height: 2.5rem; }
        .text-3xl { font-size: 1.875rem; line-height: 2.25rem; }
        .text-2xl { font-size: 1.5rem; line-height: 2rem; }
        .text-xl { font-size: 1.25rem; line-height: 1.75rem; }
        .text-lg { font-size: 1.125rem; line-height: 1.75rem; }
        .text-sm { font-size: 0.875rem; line-height: 1.25rem; }
        .text-xs { font-size: 0.75rem; line-height: 1rem; }
        .text-amber-900 { color: #78350f; }
        .text-amber-700 { color: #b45309; }
        .text-amber-600 { color: #d97706; }
        .text-gray-600 { color: #4b5563; }
        .text-gray-800 { color: #1f2937; }
        .text-green-800 { color: #166534; }
        .text-blue-800 { color: #1e40af; }
        .text-white { color: white; }
        .text-red-500 { color: #ef4444; }
        .text-orange-400 { color: #fb923c; }
        .text-yellow-400 { color: #facc15; }
        .text-gray-300 { color: #d1d5db; }
        .bg-white { background-color: white; }
        .bg-amber-50 { background-color: #fffbeb; }
        .bg-amber-200 { background-color: #fde68a; }
        .bg-green-50 { background-color: #f0fdf4; }
        .bg-blue-50 { background-color: #eff6ff; }
        .bg-blue-200 { background-color: #bfdbfe; }
        .bg-gray-50 { background-color: #f9fafb; }
        .bg-gray-200 { background-color: #e5e7eb; }
        .bg-yellow-50 { background-color: #fefce8; }
        .bg-yellow-200 { background-color: #fde047; }
        .bg-yellow-400 { background-color: #facc15; }
        .bg-orange-50 { background-color: #fff7ed; }
        .bg-orange-400 { background-color: #fb923c; }
        .bg-red-500 { background-color: #ef4444; }
        .border { border: 1px solid #d1d5db; }
        .border-2 { border: 2px solid #d1d5db; }
        .border-amber-400 { border-color: #fbbf24; }
        .border-gray-200 { border-color: #e5e7eb; }
        .border-gray-400 { border-color: #9ca3af; }
        .border-yellow-400 { border-color: #facc15; }
        .border-orange-400 { border-color: #fb923c; }
        .border-green-200 { border-color: #bbf7d0; }
        .rounded { border-radius: 0.25rem; }
        .rounded-lg { border-radius: 0.5rem; }
        .rounded-full { border-radius: 9999px; }
        .p-1 { padding: 0.25rem; }
        .p-2 { padding: 0.5rem; }
        .p-3 { padding: 0.75rem; }
        .p-4 { padding: 1rem; }
        .p-6 { padding: 1.5rem; }
        .px-2 { padding-left: 0.5rem; padding-right: 0.5rem; }
        .px-3 { padding-left: 0.75rem; padding-right: 0.75rem; }
        .px-4 { padding-left: 1rem; padding-right: 1rem; }
        .px-6 { padding-left: 1.5rem; padding-right: 1.5rem; }
        .py-1 { padding-top: 0.25rem; padding-bottom: 0.25rem; }
        .py-2 { padding-top: 0.5rem; padding-bottom: 0.5rem; }
        .py-3 { padding-top: 0.75rem; padding-bottom: 0.75rem; }
        .m-1 { margin: 0.25rem; }
        .m-2 { margin: 0.5rem; }
        .mb-2 { margin-bottom: 0.5rem; }
        .mb-3 { margin-bottom: 0.75rem; }
        .mb-4 { margin-bottom: 1rem; }
        .mb-6 { margin-bottom: 1.5rem; }
        .mb-8 { margin-bottom: 2rem; }
        .mt-1 { margin-top: 0.25rem; }
        .mt-2 { margin-top: 0.5rem; }
        .mt-4 { margin-top: 1rem; }
        .mr-1 { margin-right: 0.25rem; }
        .mr-4 { margin-right: 1rem; }
        .ml-2 { margin-left: 0.5rem; }
        .mx-auto { margin-left: auto; margin-right: auto; }
        .flex { display: flex; }
        .flex-1 { flex: 1 1 0%; }
        .items-center { align-items: center; }
        .justify-between { justify-content: space-between; }
        .justify-center { justify-content: center; }
        .gap-2 { gap: 0.5rem; }
        .gap-3 { gap: 0.75rem; }
        .gap-4 { gap: 1rem; }
        .space-y-1 > * + * { margin-top: 0.25rem; }
        .space-y-3 > * + * { margin-top: 0.75rem; }
        .space-y-4 > * + * { margin-top: 1rem; }
        .w-3 { width: 0.75rem; }
        .w-4 { width: 1rem; }
        .w-6 { width: 1.5rem; }
        .w-8 { width: 2rem; }
        .w-full { width: 100%; }
        .h-2 { height: 0.5rem; }
        .h-3 { height: 0.75rem; }
        .h-4 { height: 1rem; }
        .h-6 { height: 1.5rem; }
        .h-8 { height: 2rem; }
        .h-96 { height: 24rem; }
        .max-w-md { max-width: 28rem; }
        .max-h-64 { max-height: 16rem; }
        .overflow-y-auto { overflow-y: auto; }
        .relative { position: relative; }
        .absolute { position: absolute; }
        .transform { transform: translateZ(0); }
        .-translate-x-1\\/2 { transform: translateX(-50%); }
        .-translate-y-1\\/2 { transform: translateY(-50%); }
        .cursor-pointer { cursor: pointer; }
        .select-none { user-select: none; }
        .transition-all { transition: all 0.15s ease-in-out; }
        .transition-transform { transition: transform 0.15s ease-in-out; }
        .duration-300 { transition-duration: 300ms; }
        .hover\\:scale-110:hover { transform: scale(1.1); }
        .hover\\:bg-gray-50:hover { background-color: #f9fafb; }
        .shadow { box-shadow: 0 1px 3px 0 rgba(0,0,0,0.1); }
        .shadow-lg { box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1); }
        .animate-spin { animation: spin 1s linear infinite; }
        .animate-pulse { animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite; }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: .5; } }
        .capitalize { text-transform: capitalize; }
        .italic { font-style: italic; }
        input, select { 
            padding: 0.5rem; 
            border: 1px solid #d1d5db; 
            border-radius: 0.375rem; 
            background: white; 
        }
        input:focus, select:focus { 
            outline: none; 
            border-color: #3b82f6; 
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1); 
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script>
        // Envolver todo en DOMContentLoaded para asegurar carga completa
        document.addEventListener('DOMContentLoaded', function() {
            // Verificar que React est√© cargado
            if (typeof React === 'undefined') {
                console.error('React no est√° cargado');
                document.getElementById('root').innerHTML = '<div style="padding: 20px; color: red;">Error: React no se carg√≥ correctamente. Recarga la p√°gina.</div>';
                return;
            } else {
                console.log('React cargado correctamente:', React);
            }
            
            const { useState, useEffect } = React;
        const { createRoot } = ReactDOM;
        
        // Iconos simples como componentes
        const Users = () => React.createElement('span', null, 'üë•');
        const Crown = () => React.createElement('span', null, 'üëë');
        const Heart = () => React.createElement('span', null, '‚ù§Ô∏è');
        const Eye = () => React.createElement('span', null, 'üëÅÔ∏è');
        const Sword = () => React.createElement('span', null, '‚öîÔ∏è');
        const Church = () => React.createElement('span', null, '‚õ™');
        const Dice6 = () => React.createElement('span', null, 'üé≤');
        const Star = ({ className, size }) => React.createElement('span', { 
            className, 
            style: { fontSize: size || 16 } 
        }, '‚≠ê');

        const VetustaGame = () => {
          
          // Ubicaciones del tablero
          const locations = {
            catedral: { name: "Catedral", icon: "‚õ™", x: 50, y: 30, effect: "+1 Reputaci√≥n (religiosos)" },
            casino: { name: "Casino", icon: "üé≤", x: 20, y: 40, effect: "Apostar por cartas extra" },
            teatro: { name: "Teatro", icon: "üé≠", x: 80, y: 40, effect: "Interacciones -1 coste" },
            paseo: { name: "Paseo", icon: "üå≥", x: 35, y: 60, effect: "Romance +1 efectividad" },
            casa: { name: "Casa Ana", icon: "üè†", x: 65, y: 50, effect: "Interacciones privadas" },
            palacio: { name: "Palacio", icon: "üëë", x: 50, y: 10, effect: "Ferm√≠n +1 Influencia" },
            club: { name: "La Mercer√≠a", icon: "üßµ", x: 15, y: 65, effect: "Intercambio libre rumores" },
            cafe: { name: "Caf√©", icon: "‚òï", x: 85, y: 65, effect: "Revelar info -1 carta" },
            plaza: { name: "Plaza", icon: "üè™", x: 50, y: 75, effect: "Rumores se propagan" },
            jardin: { name: "Jard√≠n", icon: "üå∫", x: 70, y: 25, effect: "Encuentros sin penalizaci√≥n" },
            biblioteca: { name: "Biblioteca", icon: "üìö", x: 25, y: 25, effect: "+1 carta, inmune rumores" },
            salon: { name: "Sal√≥n", icon: "‚ú®", x: 75, y: 75, effect: "Acciones doble efecto" }
          };

          // Personajes
          const characters = {
            ana: { 
              name: "Ana Ozores", 
              color: "#e91e63", 
              ability: "Confesi√≥n: Revelar Secretos sin perder Reputaci√≥n",
              location: "casa",
              reputation: 5
            },
            fermin: { 
              name: "Ferm√≠n de Pas", 
              color: "#9c27b0", 
              ability: "Influencia Espiritual: +2 en Catedral",
              location: "catedral",
              reputation: 5
            },
            alvaro: { 
              name: "√Ålvaro Mes√≠a", 
              color: "#f44336", 
              ability: "Seducci√≥n: Rumores como Cortejo",
              location: "casino",
              reputation: 5
            },
            victor: { 
              name: "V√≠ctor Quintanar", 
              color: "#2196f3", 
              ability: "Honor Ciego: Inmune a Deshonra",
              location: "casa",
              reputation: 5
            }
          };

          // Cartas
          const cardTypes = {
            rumor: [
              { name: "Susurros en Misa", effect: "Reduce Reputaci√≥n -1 a personaje religioso", target: "player" },
              { name: "Miradas en Teatro", effect: "Crea v√≠nculo rom√°ntico entre dos personajes", target: "two_players" },
              { name: "Encuentro Nocturno", effect: "Compromete reputaci√≥n -2 a dos personajes", target: "two_players" },
              { name: "Confesi√≥n Reveladora", effect: "Obliga a mostrar carta de Secreto", target: "player" },
              { name: "Chisme de Sal√≥n", effect: "Propaga rumor existente +1 efecto", target: "none" }
            ],
            secret: [
              { name: "Amor Prohibido", effect: "+3 puntos oculto, -5 si se revela", target: "self" },
              { name: "Ambici√≥n Clerical", effect: "+2 Influencia, -3 Reputaci√≥n si descubierto", target: "self" },
              { name: "Deuda de Honor", effect: "Debe realizar acci√≥n espec√≠fica o -4 Reputaci√≥n", target: "self" },
              { name: "Pasado Oscuro", effect: "-6 Reputaci√≥n si se revela", target: "self" },
              { name: "Correspondencia", effect: "Intercambio forzoso de cartas", target: "player" }
            ],
            event: [
              { name: "Serm√≥n Dominical", effect: "Todos en Catedral +1 Reputaci√≥n", target: "location" },
              { name: "Estreno Teatro", effect: "Presentes pueden acci√≥n extra", target: "location" },
              { name: "Esc√°ndalo P√∫blico", effect: "Menor reputaci√≥n pierde -2 m√°s", target: "all" },
              { name: "Visita Obispo", effect: "Ferm√≠n +3 Influencia", target: "specific" },
              { name: "Duelo de Honor", effect: "Dos personajes masculinos se enfrentan", target: "two_players" }
            ]
          };

          // Estado del juego
          const [gameState, setGameState] = useState({
            players: [],
            currentPlayer: 0,
            currentTurn: 1,
            phase: 'setup',
            selectedCharacters: [],
            playerHands: {},
            gameLog: [],
            aiThinking: false,
            maxTurns: 16,
            processing: false
          });

          const [setupForm, setSetupForm] = useState({
            numPlayers: 2,
            playerNames: ['', ''],
            playerTypes: ['human', 'ai'],
            maxTurns: 16,
            fastAI: false
          });

          const [gameActions, setGameActions] = useState({
            showDice: false,
            diceResult: null,
            selectedCard: null,
            targetPlayer: null,
            showCards: false
          });

          // Obtener cartas aleatorias
          const getRandomCards = (type, count) => {
            const cards = [...cardTypes[type]];
            const result = [];
            for (let i = 0; i < count; i++) {
              if (cards.length > 0) {
                const randomIndex = Math.floor(Math.random() * cards.length);
                result.push(cards.splice(randomIndex, 1)[0]);
              }
            }
            return result;
          };

          // Inicializar juego
          const initializeGame = () => {
            const selectedChars = Object.keys(characters).slice(0, setupForm.numPlayers);
            const players = setupForm.playerNames.slice(0, setupForm.numPlayers).map((name, index) => ({
              id: index,
              name: name || (setupForm.playerTypes[index] === 'ai' ? `IA ${characters[selectedChars[index]].name}` : `Jugador ${index + 1}`),
              character: selectedChars[index],
              location: characters[selectedChars[index]].location,
              reputation: 5,
              influence: 0,
              secrets: 0,
              movements: 0,
              isAI: setupForm.playerTypes[index] === 'ai'
            }));

            // Repartir cartas iniciales
            const hands = {};
            players.forEach(player => {
              hands[player.id] = {
                rumor: getRandomCards('rumor', 3),
                secret: getRandomCards('secret', 2),
                event: getRandomCards('event', 1)
              };
            });

            const newGameState = {
              players,
              currentPlayer: 0,
              currentTurn: 1,
              phase: 'playing',
              selectedCharacters: selectedChars,
              playerHands: hands,
              gameLog: [`¬°Comienza el juego en Vetusta! ${setupForm.maxTurns} turnos totales. Turno 1: ${players[0].name}`],
              aiThinking: false,
              maxTurns: setupForm.maxTurns,
              fastAI: setupForm.fastAI,
              processing: false
            };

            setGameState(newGameState);
          };

          // Sistema simplificado de turnos
          const advanceGame = () => {
            console.log('‚è≠Ô∏è Avanzando juego...');
            setGameState(prev => {
              console.log(`üìä Estado actual: Turno ${prev.currentTurn}/${prev.maxTurns}, Jugador ${prev.currentPlayer}, Phase: ${prev.phase}, Processing: ${prev.processing}`);
              if (prev.phase !== 'playing' || prev.processing) {
                console.log('‚ùå No se puede avanzar - juego no est√° en progreso o est√° procesando');
                return prev;
              }

              // Verificar condiciones de victoria/derrota
              const defeatedPlayer = prev.players.find(p => p.reputation <= 0);
              if (defeatedPlayer) {
                const finalScores = prev.players.map(player => ({
                  ...player,
                  finalScore: (player.reputation * 2) + (player.influence * 2) + (player.secrets * 3)
                })).sort((a, b) => b.finalScore - a.finalScore);

                return {
                  ...prev,
                  phase: 'ended',
                  finalScores,
                  endReason: `${defeatedPlayer.name} ha perdido toda su reputaci√≥n`,
                  aiThinking: false,
                  processing: false,
                  gameLog: [
                    ...prev.gameLog.slice(-7),
                    `üèÜ JUEGO TERMINADO: ${defeatedPlayer.name} ha perdido toda su reputaci√≥n`,
                    `ü•á Ganador: ${finalScores[0].name} (${finalScores[0].finalScore} puntos)`
                  ]
                };
              }

              // Verificar fin de juego por turnos
              console.log(`üèÅ Verificando fin: ${prev.currentTurn} >= ${prev.maxTurns}?`);
              if (prev.currentTurn >= prev.maxTurns) {
                console.log('‚úÖ Juego terminado por turnos m√°ximos');
                const finalScores = prev.players.map(player => ({
                  ...player,
                  finalScore: (player.reputation * 2) + (player.influence * 2) + (player.secrets * 3)
                })).sort((a, b) => b.finalScore - a.finalScore);

                return {
                  ...prev,
                  phase: 'ended',
                  finalScores,
                  endReason: `${prev.maxTurns} turnos completados`,
                  aiThinking: false,
                  processing: false,
                  gameLog: [
                    ...prev.gameLog.slice(-7),
                    `üèÜ JUEGO TERMINADO: ${prev.maxTurns} turnos completados`,
                    `ü•á Ganador: ${finalScores[0].name} (${finalScores[0].finalScore} puntos)`
                  ]
                };
              }

              // Siguiente jugador y turno
              const nextPlayer = (prev.currentPlayer + 1) % prev.players.length;
              const nextTurn = prev.currentTurn + 1;
              
              console.log(`‚û°Ô∏è Pr√≥ximo turno: Jugador ${nextPlayer} (${prev.players[nextPlayer]?.name}), Turno ${nextTurn}`);

              return {
                ...prev,
                currentPlayer: nextPlayer,
                currentTurn: nextTurn,
                processing: false,
                gameLog: [...prev.gameLog.slice(-9), `Turno ${nextTurn} de ${prev.maxTurns}: ${prev.players[nextPlayer].name}`]
              };
            });

            setGameActions({ showDice: false, diceResult: null, selectedCard: null, targetPlayer: null, showCards: false });
          };


          // Mover personaje
          const movePlayer = (locationKey) => {
            setGameState(prev => {
              const currentPlayerData = prev.players[prev.currentPlayer];
              const playerId = prev.currentPlayer;
              
              const updatedPlayers = prev.players.map(player => 
                player.id === prev.currentPlayer 
                  ? { ...player, location: locationKey, movements: player.movements + 1 }
                  : player
              );

              // Aplicar efecto inmediatamente sin setTimeout
              const player = updatedPlayers[playerId];
              const location = locations[locationKey];
              let logMessage = `${player.name} se mueve a ${location.name}`;
              
              // Aplicar efectos seg√∫n la ubicaci√≥n
              switch(locationKey) {
                case 'catedral':
                  if (player.character === 'fermin') {
                    updatedPlayers[playerId].influence += 2;
                    updatedPlayers[playerId].reputation += 1;
                    logMessage += ' (+2 Influencia, +1 Reputaci√≥n por ser religioso)';
                  } else {
                    updatedPlayers[playerId].reputation += 1;
                    logMessage += ' (+1 Reputaci√≥n)';
                  }
                  break;
                case 'casino':
                  if (Math.random() > 0.5) {
                    updatedPlayers[playerId].influence += 1;
                    logMessage += ' (gana influencia apostando)';
                  } else {
                    updatedPlayers[playerId].reputation = Math.max(0, updatedPlayers[playerId].reputation - 1);
                    logMessage += ' (pierde reputaci√≥n apostando)';
                  }
                  break;
                case 'teatro':
                case 'salon':
                  updatedPlayers[playerId].influence += 1;
                  logMessage += ' (+1 Influencia social)';
                  break;
                case 'paseo':
                case 'jardin':
                  if (player.character === 'ana' || player.character === 'alvaro') {
                    updatedPlayers[playerId].secrets += 1;
                    logMessage += ' (+1 Secreto rom√°ntico)';
                  }
                  break;
                case 'biblioteca':
                  updatedPlayers[playerId].secrets += 1;
                  logMessage += ' (+1 Secreto estudiando)';
                  break;
                case 'palacio':
                  if (player.character === 'fermin') {
                    updatedPlayers[playerId].influence += 2;
                    logMessage += ' (+2 Influencia clerical)';
                  } else {
                    updatedPlayers[playerId].influence += 1;
                    logMessage += ' (+1 Influencia pol√≠tica)';
                  }
                  break;
                case 'club':
                  updatedPlayers[playerId].reputation += 1;
                  logMessage += ' (+1 Reputaci√≥n social)';
                  break;
                case 'cafe':
                case 'plaza':
                  if (Math.random() > 0.7) {
                    updatedPlayers[playerId].secrets += 1;
                    logMessage += ' (descubre un secreto)';
                  }
                  break;
                default:
                  // Ubicaci√≥n neutra
                  break;
              }

              return {
                ...prev,
                players: updatedPlayers,
                gameLog: [...prev.gameLog.slice(-9), logMessage]
              };
            });
          };

          // Ejecutar turno de IA
          const executeAITurn = async () => {
            console.log('ü§ñ Ejecutando turno de IA...');
            await new Promise(resolve => {
              setGameState(prev => {
                console.log(`üéÆ IA jugador ${prev.currentPlayer} (${prev.players[prev.currentPlayer]?.name})`);
                resolve();
                return { ...prev, processing: true, aiThinking: true };
              });
            });

            try {
              // Reducir delay para modo r√°pido (obtener del estado actual)
              const currentState = await new Promise(resolve => {
                setGameState(prev => {
                  resolve(prev);
                  return prev;
                });
              });
              
              if (!currentState.fastAI) {
                await new Promise(r => setTimeout(r, 1000));
              } else {
                await new Promise(r => setTimeout(r, 100));
              }

              // Tirar dados
              const dice = Math.floor(Math.random() * 6) + 1 + Math.floor(Math.random() * 6) + 1;
              setGameActions({ showDice: true, diceResult: dice });
              
              await new Promise(resolve => {
                setGameState(prev => {
                  const player = prev.players[prev.currentPlayer];
                  resolve();
                  return {
                    ...prev,
                    gameLog: [...prev.gameLog.slice(-9), `${player.name} (IA) tira los dados: ${dice}`]
                  };
                });
              });

              // Reducir delay para modo r√°pido
              if (!currentState.fastAI) {
                await new Promise(r => setTimeout(r, 1000));
              } else {
                await new Promise(r => setTimeout(r, 50));
              }

              // Mover a ubicaci√≥n con estrategia mejorada
              const locationKeys = Object.keys(locations);
              let targetLocation;
              
              await new Promise(resolve => {
                setGameState(prev => {
                  const player = prev.players[prev.currentPlayer];
                  const turn = prev.currentTurn;
                  
                  // Estrategia diferenciada por personaje y fase del juego
                  switch(player.character) {
                    case 'ana':
                      if (turn < prev.maxTurns / 3) {
                        // Fase inicial: busca reputaci√≥n
                        targetLocation = Math.random() > 0.4 ? 'catedral' : 'biblioteca';
                      } else if (turn < prev.maxTurns * 2 / 3) {
                        // Fase media: romance y secretos
                        targetLocation = ['paseo', 'jardin', 'casa'][Math.floor(Math.random() * 3)];
                      } else {
                        // Fase final: influencia social
                        targetLocation = ['salon', 'club', 'teatro'][Math.floor(Math.random() * 3)];
                      }
                      break;
                    case 'fermin':
                      if (player.influence < 3) {
                        targetLocation = Math.random() > 0.2 ? 'catedral' : 'palacio';
                      } else {
                        targetLocation = ['salon', 'club', 'biblioteca'][Math.floor(Math.random() * 3)];
                      }
                      break;
                    case 'alvaro':
                      if (player.secrets < 2) {
                        targetLocation = ['paseo', 'jardin', 'casino'][Math.floor(Math.random() * 3)];
                      } else {
                        targetLocation = ['teatro', 'salon', 'club'][Math.floor(Math.random() * 3)];
                      }
                      break;
                    case 'victor':
                      if (player.reputation < 4) {
                        targetLocation = ['catedral', 'club', 'biblioteca'][Math.floor(Math.random() * 3)];
                      } else {
                        targetLocation = Math.random() > 0.5 ? 'casa' : 'palacio';
                      }
                      break;
                    default:
                      targetLocation = locationKeys[Math.floor(Math.random() * locationKeys.length)];
                  }
                  
                  resolve();
                  return prev;
                });
              });
              
              console.log('üéØ Moviendo a:', targetLocation);
              movePlayer(targetLocation);
              console.log('‚úÖ Movimiento completado');

              // Reducir delay para modo r√°pido
              if (!currentState.fastAI) {
                await new Promise(r => setTimeout(r, 1500));
              } else {
                await new Promise(r => setTimeout(r, 50));
              }

              // Evento aleatorio ocasional (20% probabilidad)
              if (Math.random() < 0.2) {
                await new Promise(resolve => {
                  setGameState(prev => {
                    const player = prev.players[prev.currentPlayer];
                    const events = [
                      { effect: () => ({ reputation: 1 }), message: 'Un acto de bondad mejora tu reputaci√≥n (+1)' },
                      { effect: () => ({ influence: 1 }), message: 'Una conexi√≥n √∫til aumenta tu influencia (+1)' },
                      { effect: () => ({ secrets: 1 }), message: 'Descubres informaci√≥n valiosa (+1 Secreto)' },
                      { effect: () => ({ reputation: -1 }), message: 'Un rumor da√±ino afecta tu reputaci√≥n (-1)' },
                    ];
                    
                    const randomEvent = events[Math.floor(Math.random() * events.length)];
                    const effect = randomEvent.effect();
                    
                    const updatedPlayers = prev.players.map(p => 
                      p.id === prev.currentPlayer 
                        ? { 
                            ...p, 
                            reputation: Math.max(0, Math.min(10, p.reputation + (effect.reputation || 0))),
                            influence: Math.max(0, p.influence + (effect.influence || 0)),
                            secrets: Math.max(0, p.secrets + (effect.secrets || 0))
                          }
                        : p
                    );
                    
                    resolve();
                    return {
                      ...prev,
                      players: updatedPlayers,
                      gameLog: [...prev.gameLog.slice(-8), `‚ö° Evento: ${player.name} - ${randomEvent.message}`]
                    };
                  });
                });
                // Reducir delay para modo r√°pido  
                if (!currentState.fastAI) {
                  await new Promise(r => setTimeout(r, 1000));
                } else {
                  await new Promise(r => setTimeout(r, 25));
                }
              }

            } finally {
              console.log('üèÅ Finalizando turno IA');
              await new Promise(resolve => {
                setGameState(prev => {
                  console.log('üîÑ Cambiando aiThinking y processing a false');
                  resolve();
                  return { ...prev, aiThinking: false, processing: false };
                });
              });
              
              console.log('‚è≥ Programando avance del juego en 100ms');
              setTimeout(advanceGame, 100);
            }
          };

          // Detectar cuando toca jugar a la IA
          useEffect(() => {
            if (gameState.phase !== 'playing' || 
                gameState.processing || 
                gameState.aiThinking ||
                gameState.players.length === 0) {
              return;
            }

            const currentPlayer = gameState.players[gameState.currentPlayer];
            if (!currentPlayer || !currentPlayer.isAI) {
              return;
            }

            const timer = setTimeout(() => {
              executeAITurn();
            }, 500);
            
            return () => clearTimeout(timer);
          }, [gameState.currentPlayer, gameState.phase, gameState.processing, gameState.aiThinking]);

          // Funci√≥n nextTurn para jugadores humanos
          const nextTurn = () => {
            advanceGame();
          };

          // Tirar dados
          const rollDice = () => {
            const result = Math.floor(Math.random() * 6) + 1 + Math.floor(Math.random() * 6) + 1;
            setGameActions(prev => ({ ...prev, showDice: true, diceResult: result }));
            
            setGameState(prev => {
              const currentPlayerData = prev.players[prev.currentPlayer];
              return {
                ...prev,
                gameLog: [...prev.gameLog.slice(-9), `${currentPlayerData.name} tira los dados: ${result} puntos de movimiento`]
              };
            });
            
            return result;
          };

          // Cambiar reputaci√≥n
          const changeReputation = (playerId, amount) => {
            setGameState(prev => ({
              ...prev,
              players: prev.players.map(player => 
                player.id === playerId 
                  ? { ...player, reputation: Math.max(0, Math.min(10, player.reputation + amount)) }
                  : player
              )
            }));
          };

          // Cambiar influencia
          const changeInfluence = (playerId, amount) => {
            setGameState(prev => ({
              ...prev,
              players: prev.players.map(player => 
                player.id === playerId 
                  ? { ...player, influence: Math.max(0, player.influence + amount) }
                  : player
              )
            }));
          };

          // Robar carta
          const drawCard = (playerId, type) => {
            const newCard = getRandomCards(type, 1)[0];
            if (newCard) {
              setGameState(prev => ({
                ...prev,
                playerHands: {
                  ...prev.playerHands,
                  [playerId]: {
                    ...prev.playerHands[playerId],
                    [type]: [...prev.playerHands[playerId][type], newCard]
                  }
                }
              }));
            }
          };

          // Jugar carta
          const playCard = (card, cardType, targetPlayerId = null) => {
            setGameState(prev => ({
              ...prev,
              playerHands: {
                ...prev.playerHands,
                [prev.currentPlayer]: {
                  ...prev.playerHands[prev.currentPlayer],
                  [cardType]: prev.playerHands[prev.currentPlayer][cardType].filter(c => c.name !== card.name)
                }
              },
              gameLog: [...prev.gameLog.slice(-9), `${prev.players[prev.currentPlayer].name} juega "${card.name}"`]
            }));
          };

          // A√±adir al log
          const addToLog = (message) => {
            setGameState(prev => ({
              ...prev,
              gameLog: [...prev.gameLog.slice(-9), message]
            }));
          };


          // Render del setup
          if (gameState.phase === 'setup') {
            return React.createElement('div', { className: 'min-h-screen bg-gradient' },
              React.createElement('div', { className: 'container-sm' },
                React.createElement('div', { className: 'text-center mb-8' },
                  React.createElement('h1', { className: 'text-4xl font-bold text-amber-900 mb-2' }, '‚õ™ Vetusta ‚õ™'),
                  React.createElement('h2', { className: 'text-2xl text-amber-700' }, 'Secretos y Reputaciones'),
                  React.createElement('p', { className: 'text-amber-600 mt-2' }, 'Basado en "La Regenta" de Clar√≠n')
                ),
                React.createElement('div', { className: 'card' },
                  React.createElement('h3', { className: 'text-xl font-semibold mb-4' }, 'Configuraci√≥n del Juego'),
                  
                  React.createElement('div', { className: 'mb-4 p-3 bg-amber-50 rounded-lg border border-amber-200' },
                    React.createElement('div', { className: 'text-sm text-amber-800' },
                      React.createElement('h4', { className: 'font-bold mb-2' }, 'üìñ C√≥mo Jugar'),
                      React.createElement('div', { className: 'mb-2' }, 
                        React.createElement('strong', null, 'Objetivo: '), 
                        'Acumula la mayor puntuaci√≥n combinando Reputaci√≥n, Influencia y Secretos.'
                      ),
                      React.createElement('div', { className: 'mb-2' }, 
                        React.createElement('strong', null, 'Turnos: '), 
                        'Cada jugador tira dados y se mueve por Vetusta visitando ubicaciones.'
                      ),
                      React.createElement('div', { className: 'mb-2' }, 
                        React.createElement('strong', null, 'Ubicaciones: '), 
                        'Cada lugar otorga bonificaciones diferentes seg√∫n tu personaje.'
                      ),
                      React.createElement('div', { className: 'text-xs mt-2 italic' }, 
                        'Puntuaci√≥n final: (Reputaci√≥n √ó 2) + (Influencia √ó 2) + (Secretos √ó 3)'
                      )
                    )
                  ),
                  
                  React.createElement('div', { className: 'mb-4 p-3 bg-blue-50 rounded-lg' },
                    React.createElement('div', { className: 'text-sm text-blue-800' },
                      React.createElement('strong', null, 'ü§ñ Jugadores IA: '),
                      'Los oponentes controlados por inteligencia artificial jugar√°n autom√°ticamente seg√∫n la personalidad y estrategia de cada personaje de La Regenta. ¬°Perfecto para jugar solo o practicar!'
                    )
                  ),
                  
                  React.createElement('div', { className: 'mb-4' },
                    React.createElement('label', { className: 'text-sm font-medium mb-2' }, 'N√∫mero de jugadores:'),
                    React.createElement('select', {
                      value: setupForm.numPlayers,
                      onChange: (e) => {
                        const num = parseInt(e.target.value);
                        setSetupForm(prev => ({
                          ...prev,
                          numPlayers: num,
                          playerNames: Array(num).fill('').map((_, i) => prev.playerNames[i] || ''),
                          playerTypes: Array(num).fill('').map((_, i) => prev.playerTypes[i] || 'human')
                        }));
                      },
                      className: 'w-full p-2 border rounded'
                    },
                      React.createElement('option', { value: 2 }, '2 jugadores'),
                      React.createElement('option', { value: 3 }, '3 jugadores'),
                      React.createElement('option', { value: 4 }, '4 jugadores')
                    )
                  ),

                  React.createElement('div', { className: 'mb-6' },
                    React.createElement('label', { className: 'text-sm font-medium mb-2' }, 'Configuraci√≥n de jugadores:'),
                    Array(setupForm.numPlayers).fill(0).map((_, index) => 
                      React.createElement('div', { key: index, className: 'mb-3 p-3 border rounded bg-gray-50' },
                        React.createElement('div', { className: 'flex items-center gap-2 mb-2' },
                          React.createElement('span', { className: 'font-medium' }, `Jugador ${index + 1}:`),
                          React.createElement('select', {
                            value: setupForm.playerTypes[index] || 'human',
                            onChange: (e) => {
                              const newTypes = [...setupForm.playerTypes];
                              newTypes[index] = e.target.value;
                              setSetupForm(prev => ({ ...prev, playerTypes: newTypes }));
                            },
                            className: 'px-2 py-1 border rounded text-sm'
                          },
                            React.createElement('option', { value: 'human' }, 'üßë Humano'),
                            React.createElement('option', { value: 'ai' }, 'ü§ñ IA')
                          )
                        ),
                        setupForm.playerTypes[index] === 'human' && React.createElement('input', {
                          type: 'text',
                          placeholder: `Nombre del jugador ${index + 1}`,
                          value: setupForm.playerNames[index] || '',
                          onChange: (e) => {
                            const newNames = [...setupForm.playerNames];
                            newNames[index] = e.target.value;
                            setSetupForm(prev => ({ ...prev, playerNames: newNames }));
                          },
                          className: 'w-full p-2 border rounded text-sm'
                        }),
                        setupForm.playerTypes[index] === 'ai' && React.createElement('div', { className: 'text-sm text-gray-600 italic' },
                          `La IA jugar√° como ${Object.keys(characters)[index] ? characters[Object.keys(characters)[index]].name : 'Personaje'}`
                        )
                      )
                    )
                  ),

                  React.createElement('div', { className: 'mb-6 p-3 border rounded bg-amber-50' },
                    React.createElement('h4', { className: 'font-medium mb-3' }, '‚öôÔ∏è Configuraci√≥n de Juego'),
                    React.createElement('div', { className: 'mb-3' },
                      React.createElement('label', { className: 'text-sm font-medium mb-1' }, 'Duraci√≥n del juego:'),
                      React.createElement('select', {
                        value: setupForm.maxTurns,
                        onChange: (e) => setSetupForm(prev => ({ ...prev, maxTurns: parseInt(e.target.value) })),
                        className: 'w-full p-2 border rounded text-sm'
                      },
                        React.createElement('option', { value: 12 }, '12 turnos (R√°pido ~15 min)'),
                        React.createElement('option', { value: 16 }, '16 turnos (Normal ~20 min)'),
                        React.createElement('option', { value: 24 }, '24 turnos (Largo ~30 min)'),
                        React.createElement('option', { value: 32 }, '32 turnos (√âpico ~40 min)')
                      ),
                      React.createElement('div', { className: 'text-xs text-gray-600 mt-1' },
                        `El juego durar√° exactamente ${setupForm.maxTurns} turnos. Cada jugador jugar√° aproximadamente ${Math.floor(setupForm.maxTurns / setupForm.numPlayers)} veces.`
                      )
                    )
                  ),

                  React.createElement('div', { className: 'mb-6' },
                    React.createElement('h4', { className: 'font-medium mb-2' }, 'Personajes disponibles:'),
                    Object.keys(characters).slice(0, setupForm.numPlayers).map((charKey, index) =>
                      React.createElement('div', { key: charKey, className: 'flex items-center gap-2 mb-2 p-2 bg-gray-50 rounded' },
                        React.createElement('div', { 
                          className: 'w-4 h-4 rounded-full', 
                          style: { backgroundColor: characters[charKey].color }
                        }),
                        React.createElement('div', null,
                          React.createElement('strong', null, characters[charKey].name),
                          React.createElement('div', { className: 'text-sm text-gray-600' }, characters[charKey].ability)
                        )
                      )
                    )
                  ),

                  React.createElement('button', {
                    onClick: initializeGame,
                    className: 'btn btn-primary btn-full'
                  }, '¬°Comenzar Juego!')
                )
              )
            );
          }

          // Render de fin de juego
          if (gameState.phase === 'ended') {
            return React.createElement('div', { className: 'min-h-screen bg-gradient' },
              React.createElement('div', { className: 'container-lg' },
                React.createElement('div', { className: 'text-center mb-8' },
                  React.createElement('h1', { className: 'text-4xl font-bold text-amber-900 mb-2' }, 'üèÜ JUEGO TERMINADO'),
                  React.createElement('h2', { className: 'text-2xl text-amber-700 mb-4' }, gameState.endReason)
                ),

                React.createElement('div', { className: 'card mb-6' },
                  React.createElement('h3', { className: 'text-2xl font-semibold mb-4 text-center' }, 'ü•á Clasificaci√≥n Final'),
                  gameState.finalScores?.map((player, index) =>
                    React.createElement('div', {
                      key: player.id,
                      className: `p-4 rounded border-2 mb-3 ${
                        index === 0 ? 'border-yellow-400 bg-yellow-50' :
                        index === 1 ? 'border-gray-400 bg-gray-50' :
                        index === 2 ? 'border-orange-400 bg-orange-50' : 'border-gray-200'
                      }`
                    },
                      React.createElement('div', { className: 'flex items-center justify-between' },
                        React.createElement('div', { className: 'flex items-center gap-3' },
                          React.createElement('div', { className: 'text-2xl' },
                            index === 0 ? 'ü•á' : index === 1 ? 'ü•à' : index === 2 ? 'ü•â' : `${index + 1}¬∞`
                          ),
                          React.createElement('div', {
                            className: 'w-6 h-6 rounded-full',
                            style: { backgroundColor: characters[player.character].color }
                          }),
                          React.createElement('div', null,
                            React.createElement('div', { className: 'font-bold text-lg' },
                              player.name,
                              player.isAI && React.createElement('span', { className: 'text-sm bg-blue-200 px-2 py-1 rounded ml-2' }, 'ü§ñ')
                            ),
                            React.createElement('div', { className: 'text-sm text-gray-600' }, characters[player.character].name)
                          )
                        ),
                        React.createElement('div', { className: 'text-right' },
                          React.createElement('div', { className: 'text-2xl font-bold text-amber-600' }, `${player.finalScore} pts`),
                          React.createElement('div', { className: 'text-sm text-gray-600' },
                            `Rep: ${player.reputation} | Inf: ${player.influence} | Sec: ${player.secrets}`
                          )
                        )
                      )
                    )
                  )
                ),

                React.createElement('div', { className: 'text-center space-y-3' },
                  React.createElement('button', {
                    onClick: () => setGameState(prev => ({ ...prev, phase: 'setup' })),
                    className: 'btn btn-primary mr-4'
                  }, 'üéÆ Nueva Partida'),
                  React.createElement('div', { className: 'text-sm text-gray-600 mt-4' },
                    React.createElement('p', null, '"En Vetusta, como en la vida, todos tenemos secretos que nos definen..."'),
                    React.createElement('p', { className: 'italic' }, '- Leopoldo Alas "Clar√≠n"')
                  )
                )
              )
            );
          }

          // Render del juego principal
          const currentPlayerData = gameState.players[gameState.currentPlayer];
          const currentHand = gameState.playerHands[gameState.currentPlayer];

          return React.createElement('div', { className: 'min-h-screen bg-gradient' },
            React.createElement('div', { className: 'container' },
              // Header
              React.createElement('div', { className: 'text-center mb-4' },
                React.createElement('h1', { className: 'text-3xl font-bold text-amber-900' }, '‚õ™ Vetusta: Secretos y Reputaciones ‚õ™'),
                React.createElement('div', { className: 'flex justify-center gap-4 mt-2 text-sm' },
                  React.createElement('span', { className: 'bg-white px-3 py-1 rounded font-semibold' },
                    `Turno ${gameState.currentTurn} de ${gameState.maxTurns}`
                  ),
                  React.createElement('span', { className: 'bg-amber-200 px-3 py-1 rounded font-semibold' },
                    currentPlayerData?.name || 'Jugador'
                  ),
                  gameState.currentTurn === gameState.maxTurns && React.createElement('span', { className: 'bg-red-500 text-white px-3 py-1 rounded font-bold animate-pulse' },
                    'üèÅ √öLTIMO TURNO'
                  )
                ),
                React.createElement('div', { className: 'mt-2 max-w-md mx-auto' },
                  React.createElement('div', { className: 'w-full bg-gray-200 rounded-full h-2' },
                    React.createElement('div', {
                      className: 'bg-amber-600 h-2 rounded-full transition-all duration-300',
                      style: { width: `${(gameState.currentTurn / gameState.maxTurns) * 100}%` }
                    })
                  ),
                  React.createElement('div', { className: 'text-xs text-gray-600 text-center mt-1' },
                    `Progreso: ${Math.round((gameState.currentTurn / gameState.maxTurns) * 100)}%`
                  )
                )
              ),

              React.createElement('div', { className: 'grid grid-cols-1 lg:grid-cols-4 gap-4' },
                // Tablero
                React.createElement('div', { className: 'lg:col-span-2' },
                  React.createElement('div', { className: 'card' },
                    React.createElement('h3', { className: 'text-lg font-semibold mb-4 text-center' }, 'Mapa de Vetusta'),
                    React.createElement('div', { className: 'relative bg-green-50 rounded-lg h-96 border-2 border-green-200' },
                      Object.entries(locations).map(([key, location]) => {
                        const playersHere = gameState.players.filter(p => p.location === key);
                        return React.createElement('div', {
                          key,
                          className: 'absolute transform -translate-x-1/2 -translate-y-1/2 cursor-pointer hover:scale-110 transition-transform',
                          style: { left: `${location.x}%`, top: `${location.y}%` },
                          onClick: () => gameActions.diceResult && movePlayer(key),
                          title: `${location.name}: ${location.effect}`
                        },
                          React.createElement('div', { className: 'text-center' },
                            React.createElement('div', { className: 'text-2xl mb-1' }, location.icon),
                            React.createElement('div', { className: 'text-xs font-medium bg-white px-2 py-1 rounded shadow' }, location.name),
                            playersHere.length > 0 && React.createElement('div', { className: 'flex justify-center mt-1' },
                              playersHere.map(player =>
                                React.createElement('div', {
                                  key: player.id,
                                  className: 'w-3 h-3 rounded-full border-2 border-white mr-1',
                                  style: { backgroundColor: characters[player.character].color },
                                  title: player.name
                                })
                              )
                            )
                          )
                        );
                      })
                    )
                  )
                ),

                // Panel de jugadores
                React.createElement('div', { className: 'space-y-4' },
                  React.createElement('div', { className: 'card' },
                    React.createElement('h3', { className: 'text-lg font-semibold mb-3' }, 'Jugadores'),
                    gameState.players.map(player =>
                      React.createElement('div', {
                        key: player.id,
                        className: `p-3 rounded border-2 mb-2 ${
                          player.id === gameState.currentPlayer ? 'border-amber-400 bg-amber-50' : 'border-gray-200'
                        } ${player.isAI ? 'bg-blue-50' : ''}`
                      },
                        React.createElement('div', { className: 'flex items-center gap-2 mb-2' },
                          React.createElement('div', {
                            className: 'w-4 h-4 rounded-full',
                            style: { backgroundColor: characters[player.character].color }
                          }),
                          React.createElement('div', { className: 'flex-1' },
                            React.createElement('div', { className: 'flex items-center gap-2' },
                              React.createElement('span', { className: 'font-medium' }, player.name),
                              player.isAI && React.createElement('span', { className: 'text-xs bg-blue-200 px-2 py-1 rounded' }, 'ü§ñ IA'),
                              player.id === gameState.currentPlayer && gameState.aiThinking && React.createElement('span', { className: 'text-xs bg-yellow-200 px-2 py-1 rounded animate-pulse' }, 'ü§î Pensando...')
                            ),
                            React.createElement('div', { className: 'text-sm text-gray-600' }, characters[player.character].name)
                          )
                        ),
                        React.createElement('div', { className: 'text-sm space-y-1' },
                          React.createElement('div', { className: 'flex justify-between' },
                            React.createElement('span', null, 'Reputaci√≥n:'),
                            React.createElement('div', { className: 'flex' },
                              Array(10).fill(0).map((_, i) =>
                                React.createElement(Star, {
                                  key: i,
                                  size: 12,
                                  className: i < player.reputation ? 'text-yellow-400' : 'text-gray-300'
                                })
                              )
                            )
                          ),
                          React.createElement('div', { className: 'flex justify-between' },
                            React.createElement('span', null, 'Influencia:'),
                            React.createElement('span', null, player.influence)
                          ),
                          React.createElement('div', { className: 'flex justify-between' },
                            React.createElement('span', null, 'Secretos:'),
                            React.createElement('span', null, player.secrets)
                          ),
                          React.createElement('div', { className: 'flex justify-between' },
                            React.createElement('span', null, 'Ubicaci√≥n:'),
                            React.createElement('span', null, locations[player.location].name)
                          )
                        )
                      )
                    )
                  ),

                  // Acciones del turno
                  React.createElement('div', { className: 'card' },
                    React.createElement('h3', { className: 'text-lg font-semibold mb-3' }, 'Acciones'),
                    currentPlayerData && !currentPlayerData.isAI && React.createElement(React.Fragment, null,
                      !gameActions.diceResult && React.createElement('button', {
                        onClick: rollDice,
                        className: 'btn btn-secondary btn-full mb-2 flex items-center justify-center gap-2'
                      }, React.createElement(Dice6), 'Tirar Dados'),

                      gameActions.diceResult && React.createElement('div', { className: 'mb-3 p-2 bg-blue-50 rounded text-center' },
                        React.createElement('div', { className: 'text-lg font-bold' }, `üé≤ ${gameActions.diceResult}`),
                        React.createElement('div', { className: 'text-sm' }, 'Puntos de movimiento'),
                        React.createElement('div', { className: 'text-xs text-gray-600 mt-1' }, 'Haz clic en una ubicaci√≥n para moverte')
                      ),

                      React.createElement('button', {
                        onClick: () => setGameActions(prev => ({ ...prev, showCards: !prev.showCards })),
                        className: 'btn btn-purple btn-full mb-2'
                      }, `${gameActions.showCards ? 'Ocultar' : 'Ver'} Cartas`),

                      React.createElement('button', {
                        onClick: nextTurn,
                        className: 'btn btn-success btn-full'
                      }, 'Terminar Turno')
                    ),

                    currentPlayerData && currentPlayerData.isAI && React.createElement('div', { className: 'text-center' },
                      gameState.aiThinking ? React.createElement('div', { className: 'p-4' },
                        React.createElement('div', { className: 'animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-2' }),
                        React.createElement('div', { className: 'text-sm text-gray-600' },
                          `La IA ${currentPlayerData.name || 'desconocida'} est√° analizando la situaci√≥n...`
                        )
                      ) : React.createElement('div', { className: 'p-4 text-gray-600' },
                        React.createElement('div', { className: 'mb-2' }, 'ü§ñ'),
                        React.createElement('div', { className: 'text-sm' },
                          `Turno de ${currentPlayerData.name || 'IA desconocida'}`
                        )
                      )
                    )
                  )
                ),

                // Cartas y log
                React.createElement('div', { className: 'space-y-4' },
                  gameActions.showCards && currentHand && React.createElement('div', { className: 'card' },
                    React.createElement('h3', { className: 'text-lg font-semibold mb-3' }, 'Tus Cartas'),
                    Object.entries(currentHand).map(([cardType, cards]) =>
                      React.createElement('div', { key: cardType, className: 'mb-4' },
                        React.createElement('h4', { className: 'font-medium mb-2 capitalize' },
                          `${cardType === 'rumor' ? 'Rumores' : cardType === 'secret' ? 'Secretos' : 'Eventos'} (${cards.length})`
                        ),
                        cards.map((card, index) =>
                          React.createElement('div', {
                            key: index,
                            className: 'border rounded p-2 mb-2 cursor-pointer hover:bg-gray-50',
                            onClick: () => playCard(card, cardType)
                          },
                            React.createElement('div', { className: 'font-medium text-sm' }, card.name),
                            React.createElement('div', { className: 'text-xs text-gray-600' }, card.effect)
                          )
                        )
                      )
                    )
                  ),

                  // Log del juego
                  React.createElement('div', { className: 'card' },
                    React.createElement('h3', { className: 'text-lg font-semibold mb-3' }, 'Historial'),
                    React.createElement('div', { className: 'max-h-64 overflow-y-auto space-y-1' },
                      gameState.gameLog.map((message, index) =>
                        React.createElement('div', { key: index, className: 'text-sm p-2 bg-gray-50 rounded' }, message)
                      )
                    )
                  )
                )
              )
            )
          );
        };

            // Asegurar que todo est√© listo antes de renderizar
            if (typeof React !== 'undefined' && typeof ReactDOM !== 'undefined') {
                const root = createRoot(document.getElementById('root'));
                root.render(React.createElement(VetustaGame));
            } else {
                console.error('React o ReactDOM no est√°n disponibles');
                document.getElementById('root').innerHTML = '<div style="padding: 20px; color: red;">Error: Dependencias de React no disponibles.</div>';
            }
        }); // Cerrar DOMContentLoaded
    </script>
</body>
</html>
